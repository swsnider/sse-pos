{% extends "report_base.html" %}
{% block title %}Adminstration: Sales Tax Data{% endblock %}
{% block report_scripts %}
<script type="text/javascript">
    google.load('visualization', '1', {'packages':['piechart']});
    google.setOnLoadCallback(drawChart);
    function drawChart(){
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Item Type');
        data.addColumn('number', 'Number Purchased');
        data.addRows([
            {% for i in cats %}
            ["{{i[0]}}", {{i[1]}}],
            {% endfor %}
        ]);
        
        var chart = new google.visualization.PieChart(document.getElementById('breakdown'));
        chart.draw(data, {width: 700, height: 300, is3D: true, title: 'Sales Breakdown'});
    }
</script>
{% endblock %}
{% block desc %}Common Thread POS Admin::Reports:Sales Stats{% endblock %}
{% block report_content %}
        <table>
            <tr><th>Total Sales: </th><td>${{total}}</td></tr>
            <tr><th>Total Taxable Sales: </th><td>${{taxable}}</td></tr>
        </table>
        <h3>Breakdown</h3>
        <div id="breakdown">
            <img src="http://chart.apis.google.com/chart?cht=p&amp;chs=700x300&amp;chd=t:{{categorized_data}}&amp;chl={{categorized_labels}}">
        </div>
        <table>
            <tr><th colspan="5">Taxable items:</th></tr>
            {% for i in items %}
            <tr><td>{{i.category}}</td><td>{{i.discount}}% off</td><td>${{conv(i.price)}}</td><td>x {{i.quantity}}</td><td>=${{i.total()}}</td></tr>
            {% endfor %}
        </table>
{% endblock %}
